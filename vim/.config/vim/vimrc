" vim: set tabstop=8 shiftwidth=8:

" Prelude

set nocompatible              		" Disable vi compat

" Vim doesn't work very well with fish
if &shell =~# 'fish$'
    set shell=sh
endif

" XDG setup
let use_xdg_config_home = strlen($XDG_CONFIG_HOME) > 0
let use_xdg_data_home = strlen($XDG_DATA_HOME) > 0
if use_xdg_data_home
	" As suggested by Arch Wiki, but with some changes disabled
	call mkdir($XDG_DATA_HOME . '/vim/', 'p', 0700)
	call mkdir($XDG_DATA_HOME . '/vim/undo', 'p', 0700)
	" mkdir($XDG_DATA_HOME . "/vim/swap", 'p', 0700)
	" mkdir($XDG_DATA_HOME . "/vim/backup", 'p', 0700)
	call mkdir($XDG_DATA_HOME . '/vim/view', 'p', 0700)
	set undodir=$XDG_DATA_HOME/vim/undo
	" set directory=$XDG_DATA_HOME/vim/swap
	" set backupdir=$XDG_DATA_HOME/vim/backup
	set viewdir=$XDG_DATA_HOME/vim/view
	set viminfo+='1000,n$XDG_DATA_HOME/vim/viminfo
endif
if use_xdg_config_home
	set runtimepath=$XDG_CONFIG_HOME/vim,$XDG_DATA_HOME/vim,$VIMRUNTIME,$XDG_CONFIG_HOME/vim/after
endif

" Plugin Preload Settings
source <sfile>:h/init/00-plug-preload.vim
source <sfile>:h/init/01-plugin-preload.vim

" Plugins
source <sfile>:h/init/10-plug-plugins.vim

" Settings
source <sfile>:h/init/20-settings.vim
source <sfile>:h/init/21-mappings.vim
source <sfile>:h/init/22-plugin-settings.vim

" Init
autocmd VimEnter * set nolazyredraw lazyredraw
